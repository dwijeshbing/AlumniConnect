<!DOCTYPE html>
<html>

<head>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #343a40;
            color: #fff;
        }

        .jumbotron {
            background-color: #007bff;
        }

        .card {
            background-color: #495057;
        }

        .form-container {
            background-color: #212529;
            padding: 20px;
            border-radius: 8px;
        }

        .alert {
            display: none;
        }
    </style>
</head>

<body>
    <section class="jumbotron text-white text-center">
        <div class="container">
            <h1 class="display-4">Entry Form for Questions</h1>
        </div>
    </section>

    <div class="container">
        <div class="row">
            <div class="col-lg-6 mb-4">
                <div class="card text-white">
                    <img src="./assets/KS.jpg" class="card-img-top" style="width: 500px; height: auto;" alt="Description Image">
                    <div class="card-body">
                        <h5 class="card-title">Sree Vatsava</h5>
                        <p class="card-text">He's the Lorem Ipsum is simply dummy text of the printing and typesetting
                            industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when
                            an unknown printer took a galley of type and scrambled it to make a type specimen book. It
                            has survived not only five centuries, but also the leap into electronic typesetting,
                            remaining essentially unchanged. It was popularised in the 1960s with the release of
                            Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing
                            software like Aldus PageMaker including versions of Lorem Ipsum.</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 mb-4">
                <div class="form-container">
                    <form id="form" method="POST">
                        <div class="form-group">
                            <label for="name">Name</label>
                            <input type="text" class="form-control" id="name" placeholder="Enter Your Name" name="Name"
                                required>
                        </div>

                        <div class="form-group">
                            <label for="roll">Roll Number</label>
                            <input type="text" class="form-control" id="roll" placeholder="Enter Your Roll Number"
                                name="Roll" required>
                        </div>

                        <div class="form-group">
                            <label for="dept">Branch</label>
                            <input type="text" class="form-control" id="dept" placeholder="Enter your Department"
                                name="Dept" required list="deptlist">
                            <datalist id="deptlist">
                                <option value="CSE">CSE</option>
                                <option value="CSD">CSD</option>
                                <option value="CSM">CSM</option>
                                <option value="CHEM">CHEMICAL</option>
                                <option value="CIVIL">CIVIL</option>
                                <option value="IT">IT</option>
                                <option value="ECE">ECE</option>
                                <option value="EEE">EEE</option>
                                <option value="MECH">MECHANICAL</option>
                                <option value="MRB">MRB</option>
                                <option value="MCA">MCA</option>
                            </datalist>
                        </div>

                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" class="form-control" id="email" placeholder="Your Email" name="Email"
                                required>
                        </div>

                        <div class="form-group">
                            <label for="question">Question</label>
                            <textarea class="form-control" id="question" rows="3"
                                placeholder="Enter the question you wanted to ask" name="Question"></textarea>
                        </div>

                        <button type="submit" class="btn btn-primary btn-block" id="submit-button">Submit</button>
                    </form>

                    <div id="message" class="alert mt-4"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.getElementById("form").addEventListener("submit", function (e) {
            e.preventDefault(); // Prevent the default form submission
            document.getElementById("message").textContent = "Submitting..";
            document.getElementById("message").style.display = "block";
            document.getElementById("submit-button").disabled = true;

            // Collect the form data
            var formData = new FormData(this);
            var keyValuePairs = [];
            for (var pair of formData.entries()) {
                keyValuePairs.push(pair[0] + "=" + pair[1]);
            }

            var formDataString = keyValuePairs.join("&");

            // Send a POST request to your Google Apps Script
            fetch(
                "https://script.google.com/macros/s/AKfycbyEaCzSC9nrbmrq5aRPFKr4FGZDt3kXfmHJnwWbcAdiSXD2vuqruen1S_fIslOZasSglA/exec",
                {
                    redirect: "follow",
                    method: "POST",
                    body: formDataString,
                    headers: {
                        "Content-Type": "text/plain;charset=utf-8",
                    },
                }
            )
                .then(function (response) {
                    // Check if the request was successful
                    if (response) {
                        return response; // Assuming your script returns JSON response
                    } else {
                        throw new Error("Failed to submit the form.");
                    }
                })
                .then(function (data) {
                    // Display a success message
                    document.getElementById("message").textContent =
                        "Data submitted successfully!";
                    document.getElementById("message").classList.remove("alert-danger");
                    document.getElementById("message").classList.add("alert-success");
                    document.getElementById("message").style.display = "block";
                    document.getElementById("submit-button").disabled = false;
                    document.getElementById("form").reset();

                    setTimeout(function () {
                        document.getElementById("message").textContent = "";
                        document.getElementById("message").style.display = "none";
                    }, 2600);
                })
                .catch(function (error) {
                    // Handle errors, you can display an error message here
                    console.error(error);
                    document.getElementById("message").textContent =
                        "An error occurred while submitting the form.";
                    document.getElementById("message").classList.remove("alert-success");
                    document.getElementById("message").classList.add("alert-danger");
                    document.getElementById("message").style.display = "block";
                    document.getElementById("submit-button").disabled = false;
                });
        });
    </script>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>

</html>